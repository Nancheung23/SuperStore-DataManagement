/* 
 * This file was generated by the Gradle 'init' task.
 *
 * This generated file contains a sample Java application project to get you started.
 * For more details on building Java & JVM projects, please refer to https://docs.gradle.org/8.5/userguide/building_java_projects.html in the Gradle documentation.
 */

plugins {
    // Apply the application plugin to add support for building a CLI application in Java.
    id 'application'
    // Apply the JavaFX plugin
    id 'org.openjfx.javafxplugin' version '0.0.10'
    // Apply the Shadow plugin for creating a fat JAR
    id 'com.github.johnrengelman.shadow' version '7.1.2'
}

javafx {
    version = "17"
    modules = [ 'javafx.base', 'javafx.controls', 'javafx.fxml']
}

repositories {
    // Use Maven Central for resolving dependencies.
    mavenCentral()
}

dependencies {
    implementation group: 'com.google.guava', name: 'guava', version: '32.1.2-jre'
    implementation 'org.openjfx:javafx-base:17'
    implementation 'org.openjfx:javafx-controls:17'
    implementation 'org.openjfx:javafx-fxml:17'
    testImplementation 'org.junit.jupiter:junit-jupiter-api:5.7.0'
    testRuntimeOnly 'org.junit.jupiter:junit-jupiter-engine:5.7.0'
}

tasks.named('startShadowScripts').configure {
    dependsOn jar
}

tasks.named('distZip').configure {
    dependsOn shadowJar
}

tasks.named('distTar').configure {
    dependsOn shadowJar
}

tasks.named('startScripts').configure {
    dependsOn shadowJar
}

application {
    mainClass = 'SuperStore.App'
}

// java --module-path .\app\build\resources\main\javafx\lib\ --add-modules javafx.controls,javafx.fxml -jar .\app\build\libs\app.jar 

shadowJar {
    archiveClassifier.set('')
    mergeServiceFiles()
    manifest {
        attributes 'Main-Class': 'SuperStore.App'
    }
    configurations = [project.configurations.runtimeClasspath]
    include 'com/**'
    include 'SuperStore/**'
    include 'org/**'  
    include 'javafx/**'  
    include 'META-INF/**'
    include '**/*.fxml'
    include '**/*.properties'
    include '**/*.css'
    include '**/*.png'
    include '**/*.jpg'
    include '**/*.gif'
    include '**/*.xml'
    relocate 'javafx', 'myapp.shadow.javafx'
}

